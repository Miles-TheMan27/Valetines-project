<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Site Loading...</title>

    <meta property="og:title" content="Checking Connection...">
    <meta property="og:description" content="Please wait while we redirect you to the destination.">
    <meta name="description" content="Secure Redirect Service">

    <style>
        /* --- General Styles --- */
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
            background: linear-gradient(135deg, #ff9a9e, #fad0c4);
            color: white;
            cursor: none; /* Hidden on main screens */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        h1, h2 {
            font-size: 28px;
        }

        button {
            font-size: 18px;
            padding: 15px 30px;
            margin: 10px;
            cursor: pointer;
            border: none;
            border-radius: 30px;
            background: #ff4d6d;
            color: white;
            transition: all 0.3s;
            z-index: 20;
        }

        #card {
            margin-top: 20px;
            padding: 25px;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.2);
            font-size: 18px;
            min-height: 120px;
            max-width: 80%;
            display: none;
            transition: 0.3s;
        }

        #pityCounter {
            margin-top: 10px;
            font-size: 16px;
        }

        /* --- Animations --- */
        @keyframes glow {
            from {
                box-shadow: 0 0 10px #fff;
            }
            to {
                box-shadow: 0 0 30px gold;
            }
        }

        @keyframes flashGold {
            0% {
                background: #fff;
            }
            100% {
                background: linear-gradient(135deg, #ff9a9e, #fad0c4);
            }
        }

        @keyframes heartFade {
            from {
                opacity: 1;
            }
            to {
                opacity: 0;
            }
        }

        @keyframes fall {
            0% {
                transform: translateY(-50px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        @keyframes sparkleFade {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(0);
            }
        }

        @keyframes pulse {
            0% {
                transform: translate(-50%, -50%) scale(1);
            }
            50% {
                transform: translate(-50%, -50%) scale(1.1);
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
            }
        }

        @keyframes fallPetal {
            0% {
                transform: translateY(-10vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(110vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* --- Elements --- */
        .heart {
            position: absolute;
            font-size: 22px;
            pointer-events: none;
            animation: heartFade 1.5s ease-out forwards;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            pointer-events: none;
            animation: fall 2s linear forwards;
        }

        .sparkle {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            pointer-events: none;
            animation: sparkleFade 0.6s forwards;
        }

        .petal {
            position: absolute;
            color: #ff4d6d;
            font-size: 20px;
            user-select: none;
            pointer-events: none;
            z-index: 5;
            animation: fallPetal linear forwards;
        }

        /* --- Video Modal & Phone Frame --- */
        #videoModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 100;
            overflow: hidden;
            cursor: auto; /* REVEAL CURSOR HERE */
        }

        .video-container {
            position: relative;
            background: #000;
            border: 8px solid #333;
            border-radius: 36px;
            overflow: hidden;
            box-shadow: 0 0 50px rgba(255, 77, 109, 0.4);
            height: 80vh;
            aspect-ratio: 9 / 16;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        #tributeVideo {
            height: 100%;
            width: 100%;
            object-fit: cover;
            opacity: 0; /* START HIDDEN */
            transition: opacity 0.5s ease;
        }

        #unmuteOverlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #ff4d6d;
            color: white;
            padding: 20px 35px;
            border-radius: 50px;
            cursor: pointer;
            z-index: 15;
            font-weight: bold;
            font-size: 20px;
            animation: pulse 1.5s infinite;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }
    </style>
</head>

<body>

<div id="intro-screen">
    <h2 id="main-question">Are you Kayley? üíñ</h2>
    <button id="yesBtn">Yes</button>
    <button id="noBtn">No</button>
</div>

<div id="pack-screen" style="display:none;">
    <h1>Kayley's Valentine Pack üíù</h1>
    <div id="card">Press the button to open your Valentine pack üíù</div>
    <button id="openBtn">Open Pack üíù</button>
    <div id="pityCounter">‚≠ê Legendary Pity: 0/25</div>
    <button id="tributeBtn" style="display:none;">Watch Something Special üíù</button>
</div>

<div id="videoModal">
    <div class="video-container">
        <div id="unmuteOverlay" onclick="startTribute()">Click for Sound üîä</div>
        <video id="tributeVideo" playsinline>
            <source src="tribute.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>
    <button onclick="closeVideo()" style="margin-top:20px; background: transparent; border: 1px solid white;">
        Close üíî
    </button>
</div>

<script>
    const yesBtn = document.getElementById('yesBtn');
    const noBtn = document.getElementById('noBtn');
    const introScreen = document.getElementById('intro-screen');
    const packScreen = document.getElementById('pack-screen');
    const mainQuestion = document.getElementById('main-question');
    const card = document.getElementById('card');
    const openBtn = document.getElementById('openBtn');
    const pityDisplay = document.getElementById('pityCounter');
    const tributeBtn = document.getElementById("tributeBtn");
    const videoModal = document.getElementById("videoModal");
    const tributeVideo = document.getElementById("tributeVideo");
    const unmuteOverlay = document.getElementById("unmuteOverlay");

    let noSize = 18;
    let pityCounter = 0;
    let petalInterval;

    // ---------- Navigation & Verification ----------

    yesBtn.addEventListener('click', () => {
        launchConfetti(50);
        introScreen.style.display = 'none';
        packScreen.style.display = 'block';
        card.style.display = 'block';
    });

    noBtn.addEventListener('mouseover', () => {
        noSize = Math.max(6, noSize - 1);
        noBtn.style.fontSize = noSize + 'px';
        mainQuestion.textContent = "Are you really Kayley? üíñ";
        const x = Math.random() * (window.innerWidth - noBtn.offsetWidth);
        const y = Math.random() * (window.innerHeight - noBtn.offsetHeight);
        noBtn.style.position = 'absolute';
        noBtn.style.left = x + 'px';
        noBtn.style.top = y + 'px';
    });

    // ---------- Video Logic ----------

    tributeBtn.addEventListener("click", () => {
        videoModal.style.display = "flex";
        // Do NOT play yet, just show the modal
        unmuteOverlay.style.display = "block";
        tributeVideo.style.opacity = "0"; // Ensure it's black
        petalInterval = setInterval(createPetal, 300);
    });

    // NEW FUNCTION: Starts the video only when the button is pressed
    function startTribute() {
        tributeVideo.muted = false;
        tributeVideo.volume = 1.0;
        tributeVideo.style.opacity = "1"; // Show the video
        tributeVideo.play();
        unmuteOverlay.style.display = "none"; // Hide button
    }

    function closeVideo() {
        tributeVideo.pause();
        tributeVideo.currentTime = 0;
        tributeVideo.style.opacity = "0";
        videoModal.style.display = "none";
        clearInterval(petalInterval);
        document.querySelectorAll('.petal').forEach(p => p.remove());
    }

    // ---------- Gacha Compliments ----------

    const commons = [
        "Kayley, your smile could fix entire bad days.",
        "I pretend your jokes aren't funny‚Ä¶ but I laugh every time.",
        "You make everything feel lighter.",
        "You have this calm strength that‚Äôs kind of addictive.",
        "Even your random thoughts are interesting.",
        "You somehow make ordinary days feel special.",
        "I love the way you talk when you‚Äôre passionate about something.",
        "You‚Äôre effortlessly unforgettable."
    ];

    const rares = [
        "I love how strong-willed you are.",
        "When you care, you give your whole heart.",
        "You make love feel easy.",
        "You challenge me in the best ways.",
        "You‚Äôre loyal in a way that feels rare.",
        "You make me feel chosen.",
        "You see people deeply. That‚Äôs powerful."
    ];

    const epics = [
        "Cameron and Ivanne are lucky to have a bestie like you‚Ä¶ but I‚Äôm the luckiest.",
        "You inspire me just by being yourself.",
        "You don‚Äôt even realize how much you mean to me.",
        "You‚Äôre the kind of person people write stories about.",
        "When I think about my future, you‚Äôre in it.",
        "You feel like home and adventure at the same time."
    ];

    const legendary = `üíé LEGENDARY üíé\n\nKayley‚Ä¶\n\nI love how strong-willed you are.\nI love how when you care, you give your whole heart.\nAnd I love your little jokes I pretend aren‚Äôt funny‚Ä¶ even though they are.\n\nI choose you. Every time.\nHappy Valentine‚Äôs Day ‚ù§Ô∏è`;

    function updatePity() {
        pityDisplay.innerText = `‚≠ê Legendary Pity: ${pityCounter}/25`;
    }

    function giveLegendary() {
        document.body.style.animation = "flashGold 0.5s forwards";
        setTimeout(() => {
            card.innerText = legendary;
            card.style.animation = "glow 1s infinite alternate";
            pityCounter = 0;
            updatePity();
            openBtn.disabled = false;
            launchConfetti(40);
            setTimeout(() => {
                heartExplosion(80);
                tributeBtn.style.display = "inline-block";
            }, 300);
        }, 600);
    }

    openBtn.addEventListener('click', () => {
        openBtn.disabled = true;
        card.style.animation = "";
        card.innerText = "Opening your Valentine pack...";
        pityCounter++;
        updatePity();

        setTimeout(() => {
            let legendaryChance = 3;
            if (pityCounter >= 15) legendaryChance += (pityCounter - 14) * 2;
            if (pityCounter >= 25) {
                giveLegendary();
                return;
            }

            let roll = Math.floor(Math.random() * 100) + 1;
            if (roll <= legendaryChance) {
                giveLegendary();
            } else if (roll <= 70) {
                card.innerText = "üíó COMMON\n\n" + commons[Math.floor(Math.random() * commons.length)];
                openBtn.disabled = false;
            } else if (roll <= 90) {
                card.innerText = "üíû RARE\n\n" + rares[Math.floor(Math.random() * rares.length)];
                openBtn.disabled = false;
            } else {
                card.innerText = "üíñ EPIC\n\n" + epics[Math.floor(Math.random() * epics.length)];
                openBtn.disabled = false;
            }
        }, 1200);
    });

    // ---------- Effects & Visuals ----------

    function createPetal() {
        const petal = document.createElement('div');
        const icons = ['üå∏', 'üåπ', '‚ù§Ô∏è'];
        petal.classList.add('petal');
        petal.innerText = icons[Math.floor(Math.random() * icons.length)];
        petal.style.left = Math.random() * 100 + 'vw';
        petal.style.animationDuration = (Math.random() * 3 + 2) + 's';
        petal.style.fontSize = (Math.random() * 10 + 15) + 'px';
        videoModal.appendChild(petal);
        setTimeout(() => petal.remove(), 5000);
    }

    function heartExplosion(amount) {
        for (let i = 0; i < amount; i++) {
            const heart = document.createElement("div");
            heart.className = "heart";
            heart.innerText = "üíñ";
            const centerX = window.innerWidth / 2;
            const centerY = window.innerHeight / 2;
            heart.style.left = centerX + "px";
            heart.style.top = centerY + "px";
            const angle = Math.random() * 2 * Math.PI;
            const distance = Math.random() * 250 + 50;
            const x = Math.cos(angle) * distance;
            const y = Math.sin(angle) * distance;
            heart.style.transform = `translate(${x}px, ${y}px) scale(${Math.random() * 1.5 + 0.5})`;
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 1500);
        }
    }

    function launchConfetti(amount) {
        for (let i = 0; i < amount; i++) {
            const confetti = document.createElement('div');
            confetti.classList.add('confetti');
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 75%)`;
            document.body.appendChild(confetti);
            setTimeout(() => confetti.remove(), 2000);
        }
    }

    document.addEventListener('mousemove', (e) => {
        const sparkle = document.createElement('div');
        sparkle.classList.add('sparkle');
        sparkle.style.left = e.clientX + 'px';
        sparkle.style.top = e.clientY + 'px';
        sparkle.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 90%)`;
        document.body.appendChild(sparkle);
        setTimeout(() => sparkle.remove(), 600);
    });
</script>

</body>

</html>

